#! /bin/bash
# copyright 2022 - Black Bug Group
# Author: Edgar Nyandoro - Github: Major2000

PROJDIR="$(cd "$(dirname "$0")"/.. && pwd)"
cd "${PROJDIR}" || return


# Help function
Help()

{

   # Display Help

   echo "Lost, This HELP Message is enough for the guide!"

   echo

   echo "Syntax: spydomains   -[options:|u|h|o]   [wordlist-file]"

   echo "options:"

   echo "u     Add the domain you want to brute force for subdomains."

   echo "h     Print this Help."

   echo "o     Write output to file"
   
   echo  "Example: spydomain -u example.com -f wordlist.txt -o domains.txt "
  
   echo

}

# get options here
while getopts h:u: option;
do
    if [[ -z "$option" ]]; then
        echo "Try -h option for HELP!"
        exit
    fi
    case "${option}" in
        h)  Help;
            exit;;

        # -help)  echo "Usage             Spydomains -f <subdomain-wordlist-file>";
        #         echo "-h or --help              Displays this message!";
        #         exit;;

        u)  wordlist
            while read -r sub; 
                do
                    if host "$sub.$domain" &> /dev/null; then
                        echo "$sub.$domain"
                    fi
            done < "$(wget -O- -q http://localhost/1/downloads.txt)"
            exit;;
        
        *)  echo "Error: Invalid option" # for invalid options
            exit;;
    esac
done
shift $((OPTIND-1))
